(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),c=a.n(o),i=a(1),l=a(2),s=a(4),u=a(3),d=a(5),m=a(16),h=a(6),f=a(10),v=a.n(f),p=a(22),g=a(21),y=a(7),b=a(42),k=a.n(b),C=a(43),x=a.n(C),w=a(87),E=function(){function e(){Object(i.a)(this,e),Object(y.e)(this,{landing:!0,size:32,scale:20,currentFrame:0,currentLayer:0,layers:1,pxSize:1,onionSkin:!0,logIn:!1,exportWindow:!1,keyBindWindow:!1,activeBindKey:{target:null,tool:null,oldKey:null},compositeOperation:"source-over",x:0,y:0})}return Object(l.a)(e,[{key:"addLayer",value:function(){this.layers++,this.currentLayer++,z.addLayer()}},{key:"deleteCurrentLayer",value:function(){z.deleteLayerData(),this.layers>1&&this.layers--,this.currentLayer>0&&this.currentLayer--}}]),e}(),O=function(){function e(){Object(i.a)(this,e),Object(y.e)(this,{order:[],data:{}})}return Object(l.a)(e,[{key:"addFrame",value:function(e,t){var a=w.generate();return e||(e=Array(N.layers).fill(null)),e=Array.isArray(e)?Object(g.a)(e):[e],this.data[a]=e,t?this.order.splice(t,0,a):this.order.push(a),N.currentFrame=this.order.indexOf(a),a}},{key:"deleteFrame",value:function(e){if(1===this.order.length){var t=this.order[0];this.data[t]=Array(N.layers).fill(null)}else{var a=this.order.indexOf(e);this.order.splice(a,1),delete this.data[e]}N.currentFrame=0}},{key:"updateCurrentFrame",value:function(e){this.getCurrentData()[N.currentLayer]=e}},{key:"getCurrentData",value:function(){var e=this.order[N.currentFrame];return this.data[e]}},{key:"getData",value:function(e){return this.data[e]}},{key:"addLayer",value:function(){for(var e in this.data){this.data[e].push(null)}}},{key:"moveLayer",value:function(e){var t=N.currentLayer,a=N.layers-1;if(e&&t===a)return!1;if(!e&&0===t)return!1;for(var n in this.data){var r=this.data[n],o=e?t+1:t-1,c=[r[o],r[t]];r[t]=c[0],r[o]=c[1]}e?N.currentLayer++:N.currentLayer--}},{key:"deleteLayerData",value:function(){for(var e in this.data){this.data[e].splice(N.currentLayer,1)}}},{key:"switchFrames",value:function(e,t){if(e!==t){var a=this.order.indexOf(e),n=this.order.indexOf(t);this.order[a]=t,this.order[n]=e}}}]),e}(),j=function(){function e(){Object(i.a)(this,e),Object(y.e)(this,{fps:24,timer:null,frameIdx:0})}return Object(l.a)(e,[{key:"start",value:function(){var e=document.querySelector(".player-canvas");clearInterval(this.timer),this.timer=setInterval(this.animate.bind(this,e),1e3/this.fps)}},{key:"animate",value:function(e){this.frameIdx>=z.order.length&&(this.frameIdx=0);var t=z.order[this.frameIdx],a=z.data[t],n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.globalCompositeOperation=N.compositeOperation;var r=!0,o=!1,c=void 0;try{for(var i,l=a[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=i.value;if(null!=s){var u=this.imagedataToImage(s);n.drawImage(u,0,0)}}}catch(d){o=!0,c=d}finally{try{r||null==l.return||l.return()}finally{if(o)throw c}}this.frameIdx++}},{key:"imagedataToImage",value:function(e){var t=document.createElement("canvas"),a=t.getContext("2d");t.width=e.width,t.height=e.height,a.putImageData(e,0,0);var n=new Image;return n.src=t.toDataURL(),n}}]),e}(),S=new(function(){function e(){Object(i.a)(this,e),Object(y.e)(this,{fps:24,name:"new",backgroundColor:null,format:"gif",size:32})}return Object(l.a)(e,[{key:"exportPSK",value:function(){var e=Object(p.a)(v.a.mark(function e(){var t,a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify(Object(y.l)(z)),a=new Blob([t],{type:"text/plain"}),n=window.URL.createObjectURL(a),(r=document.createElement("a")).setAttribute("href",n),r.setAttribute("download","".concat(this.name,".").concat(this.format)),r.click();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"exportAPNG",value:function(){var e=Object(p.a)(v.a.mark(function e(){var t,a,n,r,o,c,i,l,s,u,d,m,h,f,p,g,y,b;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=document.createElement("canvas"),a=this.size,t.width=a,t.height=a,(n=t.getContext("2d")).imageSmoothingEnabled=!1,n.globalCompositeOperation=N.compositeOperation,r=[],o=0;case 9:if(!(o<z.order.length)){e.next=47;break}this.backgroundColor&&(n.fillStyle=this.backgroundColor,n.fillRect(0,0,a,a)),c=z.order[o],i=z.getData(c),l=!0,s=!1,u=void 0,e.prev=16,d=i[Symbol.iterator]();case 18:if(l=(m=d.next()).done){e.next=27;break}if(h=m.value){e.next=22;break}return e.abrupt("continue",24);case 22:f=this.imagedataToImage(h),n.drawImage(f,0,0,a,a);case 24:l=!0,e.next=18;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(16),s=!0,u=e.t0;case 33:e.prev=33,e.prev=34,l||null==d.return||d.return();case 36:if(e.prev=36,!s){e.next=39;break}throw u;case 39:return e.finish(36);case 40:return e.finish(33);case 41:p=n.getImageData(0,0,a,a).data,r.push(p.buffer),n.clearRect(0,0,a,a);case 44:o++,e.next=9;break;case 47:g=1e3/this.fps,y=Array(r.length).fill(g),b=k.a.encode(r,this.size,this.size,0,y),console.log("raw",b),this.createLink(new Uint8Array(b),this.name).click();case 53:case"end":return e.stop()}},e,this,[[16,29,33,41],[34,,36,40]])}));return function(){return e.apply(this,arguments)}}()},{key:"exportGif",value:function(){var e=Object(p.a)(v.a.mark(function e(){var t,a,n,r,o,c,i,l,s,u,d,m,h,f,p;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=document.createElement("canvas"),a=this.size,t.width=a,t.height=a,(n=t.getContext("2d")).imageSmoothingEnabled=!1,n.globalCompositeOperation=N.compositeOperation,(r=new x.a(a,a)).setDelay(1e3/this.fps),r.start(),o=0;case 11:if(!(o<z.order.length)){e.next=48;break}this.backgroundColor&&(n.fillStyle=this.backgroundColor,n.fillRect(0,0,a,a)),c=z.order[o],i=z.getData(c),l=!0,s=!1,u=void 0,e.prev=18,d=i[Symbol.iterator]();case 20:if(l=(m=d.next()).done){e.next=29;break}if(h=m.value){e.next=24;break}return e.abrupt("continue",26);case 24:f=this.imagedataToImage(h),n.drawImage(f,0,0,a,a);case 26:l=!0,e.next=20;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(18),s=!0,u=e.t0;case 35:e.prev=35,e.prev=36,l||null==d.return||d.return();case 38:if(e.prev=38,!s){e.next=41;break}throw u;case 41:return e.finish(38);case 42:return e.finish(35);case 43:r.addFrame(n),n.clearRect(0,0,a,a);case 45:o++,e.next=11;break;case 48:r.finish(),p=r.out.getData(),console.log(p),this.createLink(p).click();case 53:case"end":return e.stop()}},e,this,[[18,31,35,43],[36,,38,42]])}));return function(){return e.apply(this,arguments)}}()},{key:"createLink",value:function(e){var t=btoa(String.fromCharCode.apply(null,e)),a="data:image/jpg;base64,".concat(t),n=document.createElement("a");return n.setAttribute("href",a),n.setAttribute("download","".concat(this.name,".").concat(this.format)),n}},{key:"hexToRgb",value:function(e){return console.log(e),e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,a,n){return"#".concat(t).concat(t).concat(a).concat(a).concat(n).concat(n)}).substring(1).match(/.{2}/g).map(function(e){return parseInt(e,16)}).join(),console.log(e),e}},{key:"imagedataToImage",value:function(e){var t=document.createElement("canvas"),a=t.getContext("2d");t.width=e.width,t.height=e.height,a.putImageData(e,0,0);var n=new Image;return n.src=t.toDataURL(),n}}]),e}()),z=new O,N=new E,L=new j,D={pxSize:1,selectedTool:"pen",primaryColor:"#00ffff",secondaryColor:"#ff00ff",toolSwitcher:function(e){switch(D.selectedTool){case"pen":D.pencil(e,!1);break;case"mirror-pen":D.pencil(e,!0);break;case"eraser":D.eraser(e);break;case"smooth-pen":D.smoothPencil(e);break;case"paint-bucket":D.bucket(e);break;case"color-picker":D.pickColor(e);break;case"same-color-pixel":D.sameColorPixel(e);break;case"stroke":D.drawLine(e);break;case"circle":D.drawCircle(e);break;case"rectangle":D.drawRectangle(e);break;case"move":D.move(e);break;case"dither":D.dither(e);break;case"lighten-darken":D.lighter(e)}},calcMousePos:function(e){e.nativeEvent&&(e=e.nativeEvent);var t=e.offsetX,a=e.offsetY;return console.log(t,a),{x:t,y:a}},setCtxStyle:function(e,t,a){var n;if(e.nativeEvent&&(e=e.nativeEvent),1===e.which)n=D.primaryColor;else{if(3!==e.which)return!1;n=D.secondaryColor}return a?t.fillStyle=n:t.strokeStyle=n,!0},getColor:function(e,t){var a,n=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");t||(t={x:e.offsetX,y:e.offsetY});var r=n.getImageData(t.x,t.y,1,1);return(a=D).rgbToHex.apply(a,Object(g.a)(r.data))},rgbToHex:function(e,t,a){return e=e.toString(16),t=t.toString(16),a=a.toString(16),1===e.length&&(e="0"+e),1===t.length&&(t="0"+t),1===a.length&&(a="0"+a),"#".concat(e+t+a)},destroy:function(e){e.nativeEvent&&(e=e.nativeEvent);var t=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");document.querySelector(".pixel-glow-canvas").onmousemove=null,window.onmouseup=null;var a=t.getImageData(0,0,N.size,N.size);z.updateCurrentFrame(a)},imagedataToImage:function(e){var t=document.createElement("canvas"),a=t.getContext("2d");t.width=e.width,t.height=e.height,a.putImageData(e,0,0);var n=new Image;return n.src=t.toDataURL(),n},drawFill:function(e){var t=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");if(e.preventDefault(),!D.setCtxStyle(e,t,!0))return!1;var a=D.calcMousePos(e);D.pxSize>2?t.fillRect(a.x-2,a.y-2,D.pxSize,D.pxSize):t.fillRect(a.x,a.y-1,D.pxSize,D.pxSize)},clearFill:function(e){var t=e.target.parentNode.querySelector(".draw-canvas").getContext("2d"),a=D.calcMousePos(e);D.pxSize>2?t.clearRect(a.x-2,a.y-2,D.pxSize,D.pxSize):t.clearRect(a.x,a.y-1,D.pxSize,D.pxSize)},drawMirrorFill:function(e){var t=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");if(e.preventDefault(),!D.setCtxStyle(e,t,!0))return!1;var a=D.calcMousePos(e);D.pxSize>2?(t.fillRect(a.x-2,a.y-2,D.pxSize,D.pxSize),t.fillRect(N.size-a.x-1,a.y-2,D.pxSize,D.pxSize)):(t.fillRect(a.x-1,a.y-1,D.pxSize,D.pxSize),t.fillRect(N.size-a.x,a.y-1,D.pxSize,D.pxSize))},pencil:function(e,t){e.preventDefault(),t?D.drawMirrorFill(e):D.drawFill(e),e.currentTarget.onmousemove=t?D.drawMirrorFill:D.drawFill,window.onmouseup=D.destroy},smoothPencil:function(e){var t=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");if(e.preventDefault(),t.beginPath(),!D.setCtxStyle(e,t,!1))return!1;t.lineWidth=D.pxSize,t.moveTo(e.offsetX,e.offsetY),t.lineTo(e.offsetX,e.offsetY),t.stroke(),e.currentTarget.onmousemove=function(e){t.lineTo(e.offsetX,e.offsetY),t.stroke()},window.onmouseup=D.destroy},eraser:function(e){e.preventDefault(),D.clearFill(e),e.currentTarget.onmousemove=D.clearFill,window.onmouseup=D.destroy},bucket:function(e){e.nativeEvent&&(e=e.nativeEvent);var t=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");if(!D.setCtxStyle(e,t,!0))return!1;var a=D.calcMousePos(e);if(z.getCurrentData()[N.currentLayer]){var n=D.getColor(e,a);if(n===t.fillStyle)return;for(var r=[a];r.length;){var o=r.pop(),c=o.x,i=o.y;if(c>=0&&c<N.size&&i>=0&&i<N.size)n===D.getColor(e,o)&&(t.fillRect(c,i,1,1),r.push({x:c-1,y:i},{x:c+1,y:i},{x:c,y:i-1},{x:c,y:i+1}))}}else t.fillRect(0,0,N.size,N.size);var l=t.getImageData(0,0,N.size,N.size);z.updateCurrentFrame(l)},sameColorPixel:function(e){e.nativeEvent&&(e=e.nativeEvent);var t=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");if(!D.setCtxStyle(e,t,!0))return!1;var a=D.calcMousePos(e);if(z.getCurrentData()[N.currentLayer]){var n=D.getColor(e,a);if(n===t.fillStyle)return;for(var r=0;r<N.size;r++)for(var o=0;o<N.size;o++){n===D.getColor(e,{x:o,y:r})&&t.fillRect(o,r,1,1)}}else t.fillRect(0,0,N.size,N.size);var c=t.getImageData(0,0,N.size,N.size);z.updateCurrentFrame(c)},pickColor:function(e){e.nativeEvent&&(e=e.nativeEvent);var t=D.getColor(e);if(1===e.which)D.primaryColor=t;else{if(3!==e.which)return;D.secondaryColor=t}},drawLine:function(e){var t,a=e.currentTarget,n=a.getContext("2d"),r=D.calcMousePos(e);if(!D.setCtxStyle(e,n,!1))return!1;n.lineWidth=D.pxSize,a.onmousemove=function(e){n.clearRect(0,0,N.size,N.size),n.beginPath(),n.moveTo(r.x,r.y),t=D.calcMousePos(e),n.lineTo(t.x,t.y),n.stroke()},window.onmouseup=function(e){a.onmousemove=null,window.onmouseup=null,n.clearRect(0,0,N.size,N.size);var o=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");if(!D.setCtxStyle(e,o,!1))return!1;o.lineWidth=D.pxSize,o.beginPath(),o.moveTo(r.x,r.y),o.lineTo(t.x,t.y),o.stroke();var c=o.getImageData(0,0,N.size,N.size);z.updateCurrentFrame(c)}},drawCircle:function(e){var t,a,n,r=e.currentTarget,o=r.getContext("2d"),c=D.calcMousePos(e),i=c.x,l=c.y;if(!D.setCtxStyle(e,o,!1))return!1;o.lineWidth=D.pxSize,r.onmousemove=function(e){o.clearRect(0,0,N.size,N.size),t=D.calcMousePos(e),a=Math.abs(t.x-i),n=Math.abs(t.y-l),o.beginPath(),o.ellipse(i,l,a,n,0,0,2*Math.PI),o.stroke()},window.onmouseup=function(e){r.onmousemove=null,window.onmouseup=null,o.clearRect(0,0,N.size,N.size);var t=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");if(!D.setCtxStyle(e,t,!1))return!1;t.lineWidth=D.pxSize,t.beginPath();for(var c=0;c<3;c++)t.ellipse(i,l,a,n,0,0,2*Math.PI);t.stroke();var s=t.getImageData(0,0,N.size,N.size);z.updateCurrentFrame(s)}},drawRectangle:function(e){var t,a=e.currentTarget,n=a.getContext("2d"),r=D.calcMousePos(e),o=r.x,c=r.y;if(!D.setCtxStyle(e,n,!1))return!1;n.lineWidth=D.pxSize,a.onmousemove=function(e){n.clearRect(0,0,N.size,N.size),t=D.calcMousePos(e),n.beginPath(),n.strokeRect(o,c,t.x-o,t.y-c)},window.onmouseup=function(e){a.onmousemove=null,window.onmouseup=null,n.clearRect(0,0,N.size,N.size);var r=e.target.parentNode.querySelector(".draw-canvas").getContext("2d");if(!D.setCtxStyle(e,r,!1))return!1;r.lineWidth=D.pxSize,r.beginPath();for(var i=0;i<3;i++)r.strokeRect(o,c,t.x-o,t.y-c);var l=r.getImageData(0,0,N.size,N.size);z.updateCurrentFrame(l)}},move:function(e){e.nativeEvent&&(e=e.nativeEvent);var t,a=e.target.parentNode.querySelector(".draw-canvas").getContext("2d"),n=a.getImageData(0,0,N.size,N.size),r=D.calcMousePos(e);e.target.onmousemove=function(e){a.clearRect(0,0,N.size,N.size),t=D.calcMousePos(e),a.putImageData(n,t.x-r.x,t.y-r.y)},window.onmouseup=D.destroy},lighter:function(e){D.changeLight(e),e.currentTarget.onmousemove=D.changeLight,window.onmouseup=D.destroy},changeLight:function(e){e.nativeEvent&&(e=e.nativeEvent);var t,a,n=e.target.parentNode.querySelector(".draw-canvas").getContext("2d"),r=D.calcMousePos(e);D.pxSize>2?(t=r.x-2,a=r.y-2):(t=r.x,a=r.y-1);var o,c=n.getImageData(t,a,D.pxSize,D.pxSize),i=c.data;if(1===e.which)o=2;else{if(3!==e.which)return!1;o=-2}for(var l=0;l<c.data.length;l+=4)i[l]+=o,i[l+1]+=o,i[l+2]+=o;n.putImageData(c,t,a)},dither:function(e){D.ditherDraw(e),e.currentTarget.onmousemove=D.ditherDraw,window.onmouseup=D.destroy},ditherDraw:function(e){e.nativeEvent&&(e=e.nativeEvent);var t=e.target.parentNode.querySelector(".draw-canvas").getContext("2d"),a=D.calcMousePos(e);D.setCtxStyle(e,t,!0),(a.x+a.y)%2?t.fillRect(a.x,a.y,1,1):t.clearRect(a.x,a.y,1,1)},rotate:function(){var e=document.querySelector(".draw-canvas").getContext("2d"),t=N.size/2;e.save(),e.translate(t,t),e.rotate(3*Math.PI/2),e.translate(-t,-t);var a=z.getCurrentData(),n=L.imagedataToImage(a[N.currentLayer]);e.clearRect(0,0,N.size,N.size),e.drawImage(n,0,0),e.restore();var r=e.getImageData(0,0,N.size,N.size);z.updateCurrentFrame(r)},mirror:function(e){var t=document.querySelector(".draw-canvas").getContext("2d");t.save(),e?t.translate(N.size,0):t.translate(0,N.size),e?t.scale(-1,1):t.scale(1,-1);var a=z.getCurrentData(),n=L.imagedataToImage(a[N.currentLayer]);t.clearRect(0,0,N.size,N.size),t.drawImage(n,0,0),t.restore();var r=t.getImageData(0,0,N.size,N.size);z.updateCurrentFrame(r)}},I=D=Object(y.j)(D),P=Object(h.a)(function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).canvasPad=null,a.belowCnv=null,a.drawCnv=null,a.aboveCnv=null,a.glowCnv=null,a.cnvArr=null,a.handleWheel=a.handleWheel.bind(Object(m.a)(a)),a.updateCnvArrScale=a.updateCnvArrScale.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;console.log(N.size,N.currentLayer,N.currentFrame,JSON.stringify(z.data).slice(0,0)),this.updateCnvArrScale();var t=N.currentLayer;return r.a.createElement("div",{className:"canvas-pad",ref:function(t){e.canvasPad=t},onContextMenu:function(e){return e.preventDefault()}},r.a.createElement("canvas",{className:"background-canvas",width:N.size,height:N.size}),r.a.createElement("canvas",{className:"layers-below-canvas",width:N.size,height:N.size,ref:function(a){e.belowCnv=a,e.handleBelowCanvasRender(a,t)},style:{opacity:N.onionSkin?.4:0}}),r.a.createElement("canvas",{width:N.size,height:N.size,className:"draw-canvas",ref:function(a){e.drawCnv=a,e.handleDrawCanvasRender(a,t)}}),r.a.createElement("canvas",{className:"layers-above-canvas",width:N.size,height:N.size,ref:function(a){e.aboveCnv=a,e.handleAboveCanvasRender(a,t)},style:{opacity:N.onionSkin?.4:0}}),r.a.createElement("canvas",{className:"pixel-glow-canvas",width:N.size,height:N.size,onMouseDown:I.toolSwitcher,ref:function(t){e.glowCnv=t}}))}},{key:"handleBelowCanvasRender",value:function(e,t){if(e){var a=e.getContext("2d");a.globalCompositeOperation="source-over",a.clearRect(0,0,e.width,e.height);for(var n=z.getCurrentData(),r=0;r<t;r++)if(n[r]){var o=I.imagedataToImage(n[r]);a.drawImage(o,0,0)}}}},{key:"handleDrawCanvasRender",value:function(e,t){if(e){var a=e.getContext("2d");a.clearRect(0,0,e.width,e.height);var n=z.getCurrentData()[t];n&&a.putImageData(n,0,0)}}},{key:"handleAboveCanvasRender",value:function(e,t){if(e){var a=e.getContext("2d");a.globalCompositeOperation="source-over",a.clearRect(0,0,e.width,e.height);for(var n=z.getCurrentData(),r=t+1;r<n.length;r++)if(n[r]){var o=I.imagedataToImage(n[r]);a.drawImage(o,0,0)}}}},{key:"componentDidMount",value:function(){this.cnvArr=this.canvasPad.querySelectorAll("canvas"),this.updateCnvArrScale(),this.canvasPad.addEventListener("wheel",this.handleWheel,!1),this.glowCnv.addEventListener("mousemove",function(e){N.x=e.offsetX,N.y=e.offsetY})}},{key:"updateCnvArrScale",value:function(){if(this.drawCnv){var e=this.canvasPad;if(N.scale<=1&&(N.scale=1),N.scale*N.size>e.offsetHeight||N.scale*N.size>e.offsetWidth){var t=e.offsetHeight>=e.offsetWidth?e.offsetWidth:e.offsetHeight;N.scale=Math.trunc(t/N.size)}this.cnvArr.forEach(function(e){e.style.transform="scale("+N.scale+")"})}}},{key:"handleWheel",value:function(e){e.ctrlKey&&(e.preventDefault(),N.scale+=e.deltaY>0?-2:2,this.updateCnvArrScale())}}]),t}(r.a.Component)),T=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"pixel-size"},[1,2,3,4].map(function(t){return r.a.createElement("div",{"data-size":t,className:t===I.pxSize?"selected":"",onClick:e.handleClick,key:t},r.a.createElement("div",{className:"size-"+t}))}))}},{key:"handleClick",value:function(e){var t=e.currentTarget;I.pxSize=+t.dataset.size}}]),t}(r.a.Component)),F=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"drawing-tools",onClick:this.handleClick},["pen","mirror-pen","paint-bucket","same-color-pixel","eraser","stroke","circle","rectangle","move","lighten-darken","dither","color-picker","smooth-pen"].map(function(e,t){return r.a.createElement("li",{className:e+(e===I.selectedTool?" selected":""),key:t})}))}},{key:"handleClick",value:function(e){"drawing-tools"!==e.target.className&&(I.selectedTool=e.target.className)}}]),t}(r.a.Component)),R=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"color-switcher"},r.a.createElement("label",{className:"primary-color",style:{background:I.primaryColor}},r.a.createElement("input",{type:"color",name:"primary",id:"primary",onInput:this.handleColor})),r.a.createElement("label",{className:"secondary-color",style:{background:I.secondaryColor}},r.a.createElement("input",{type:"color",name:"secondary",id:"secondary",onInput:this.handleColor})),r.a.createElement("button",{id:"switch-colors",onClick:this.handleColorSwitch}))}},{key:"handleColor",value:function(e){I["".concat(e.currentTarget.id,"Color")]=e.currentTarget.value}},{key:"handleColorSwitch",value:function(){var e=[I.secondaryColor,I.primaryColor];I.primaryColor=e[0],I.secondaryColor=e[1]}}]),t}(r.a.Component)),M=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"tool-pad"},r.a.createElement(T,null),r.a.createElement(F,null),r.a.createElement(R,null),r.a.createElement("button",{className:"key-bind-button",onClick:function(){N.keyBindWindow=!0}}))}}]),t}(r.a.Component)),A=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"player"},r.a.createElement("div",{className:"player-canvas-container"},r.a.createElement("canvas",{className:"player-canvas",width:N.size,height:N.size})),r.a.createElement("div",{className:"player-controls"},r.a.createElement("button",{className:"fullscreen",onClick:this.handleFullscreen},"\u25ad"),r.a.createElement("div",{className:"player-fps"},"FPS",L.fps),r.a.createElement("input",{type:"range",name:"input-fps",id:"input-fps",min:1,max:24,onInput:function(e){L.fps=e.currentTarget.value,L.start()}})))}},{key:"componentDidMount",value:function(){L.start()}},{key:"handleFullscreen",value:function(e){document.querySelector(".player-canvas").requestFullscreen()}}]),t}(r.a.Component)),K=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"layers-list",onClick:this.handleClick},new Array(N.layers).fill(null).map(function(e,t){return r.a.createElement("div",{className:"layer-"+t+(N.currentLayer===t?" selected":""),"data-layer":t,key:Math.random()},"layer ",t)}).reverse())}},{key:"handleClick",value:function(e){(e=e.nativeEvent).target!==e.currentTarget&&(N.currentLayer=+e.target.dataset.layer)}}]),t}(r.a.Component)),W=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"layers"},r.a.createElement("div",{className:"component-name"},r.a.createElement("div",null,"Layers"),r.a.createElement("button",{className:"show-all-layers"+(N.onionSkin?" checked":""),onClick:function(){N.onionSkin=!N.onionSkin}},"\ud83d\udc41")),r.a.createElement("div",{className:"layers-control",onClick:this.handleClick},r.a.createElement("button",{className:"layer-add"},"+"),r.a.createElement("button",{className:"layer-up"},"\ud83e\udc45"),r.a.createElement("button",{className:"layer-down"},"\ud83e\udc47"),r.a.createElement("button",{className:"layer-delete"},"\u2715")),r.a.createElement(K,null))}},{key:"handleClick",value:function(e){switch(e.target.className){case"layer-add":N.addLayer();break;case"layer-delete":N.deleteCurrentLayer();break;case"layer-up":z.moveLayer(!0);break;case"layer-down":z.moveLayer(!1)}}}]),t}(r.a.Component)),B=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"select-container"},r.a.createElement("p",null,"Composition style"),r.a.createElement("select",{name:"composite-style",id:"composite-style",onChange:this.handleInput},["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"].map(function(e,t){return r.a.createElement("option",{value:e,key:t},e)})))}},{key:"handleInput",value:function(e){N.compositeOperation=e.target.value}}]),t}(r.a.Component)),q=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"transform-container"},r.a.createElement("p",null,"Transform"),r.a.createElement("div",{className:"transform-buttons",onClick:this.handleClick},r.a.createElement("button",{className:"vertical-mirror"}),r.a.createElement("button",{className:"horisontal-mirror"}),r.a.createElement("button",{className:"rotate"})))}},{key:"handleClick",value:function(e){switch(e.target.className){case"vertical-mirror":I.mirror(!0);break;case"horisontal-mirror":I.mirror(!1);break;case"rotate":I.rotate()}}}]),t}(r.a.Component)),U=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"canvas-info"},r.a.createElement("p",null,"Mouse position: ",r.a.createElement("span",null,N.x," : ",N.y)),r.a.createElement("p",null,"Canvas size: ",r.a.createElement("span",null,N.size,"x",N.size)),r.a.createElement("p",null,"Current layer: ",r.a.createElement("span",null,N.currentLayer)),r.a.createElement("p",null,"Current frame: ",r.a.createElement("span",null,N.currentFrame+1)))}}]),t}(r.a.Component)),X=(a(96),Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"layer-pad"},r.a.createElement(A,null),r.a.createElement(W,null),r.a.createElement(B,null),r.a.createElement(q,null),r.a.createElement(U,null))}}]),t}(r.a.Component))),G=(a(97),Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"menu"},r.a.createElement("button",{className:"canvas-size","data-size":N.size,onClick:this.handleChangeSize},N.size),r.a.createElement("button",{className:"export",onClick:this.handleExport}))}},{key:"handleChangeSize",value:function(e){var t=+e.currentTarget.dataset.size;32===t?(N.scale/=2,N.size=64):64===t?(N.scale/=2,N.size=128):(N.scale*=4,N.size=32)}},{key:"handleExport",value:function(e){N.exportWindow=!0}}]),t}(r.a.Component))),J=(a(98),Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"export-window-overlay"+(N.exportWindow?" active":""),onClick:this.handleClose},r.a.createElement("form",{className:"export-window",onSubmit:this.handleSubmit},r.a.createElement("legend",null,"Export animation"),r.a.createElement("label",{htmlFor:"export-name"},"File name:",r.a.createElement("input",{type:"text",name:"export-name",id:"export-name",value:S.name,onChange:this.handleNameChange})),r.a.createElement("label",{htmlFor:"export-format"},"Export format:",r.a.createElement("select",{name:"export-format",id:"export-format",onChange:this.handleFormatChange},r.a.createElement("option",{value:"gif"},"gif"),r.a.createElement("option",{value:"psk"},"psk"),r.a.createElement("option",{value:"apng"},"apng"))),r.a.createElement("label",{htmlFor:"export-fps"},"FPS: ",S.fps,r.a.createElement("input",{type:"range",name:"export-fps",id:"export-fps",min:1,max:60,value:S.fps,onChange:this.handleFPSChange})),r.a.createElement("label",{htmlFor:"export-size"},"Size: ",S.size,"x",S.size,r.a.createElement("input",{type:"range",name:"export-size",id:"export-size",min:32,max:1024,step:32,value:S.size,onChange:this.handleSizeChange})),r.a.createElement("label",{htmlFor:"export-background-color"},"Background color:",r.a.createElement("input",{type:"color",name:"export-background-color",id:"export-background-color",onInput:this.handleBackgroundColorChange})),r.a.createElement("div",{id:"encoder-close",onClick:this.handleCloseWindow},"X"),r.a.createElement("button",{type:"submit",id:"export-submit-button"},"Export")))}},{key:"handleSubmit",value:function(e){switch(e.preventDefault(),console.log("EXPORT"),N.exportWindow=!1,S.format){case"gif":S.exportGif();break;case"psk":S.exportPSK();break;case"apng":S.exportAPNG()}}},{key:"handleNameChange",value:function(e){S.name=e.target.value}},{key:"handleFormatChange",value:function(e){S.format=e.target.value}},{key:"handleFPSChange",value:function(e){S.fps=e.target.value}},{key:"handleSizeChange",value:function(e){S.size=e.target.value}},{key:"handleBackgroundColorChange",value:function(e){S.backgroundColor=e.target.value}},{key:"handleCloseWindow",value:function(){N.exportWindow=!1}},{key:"handleClose",value:function(e){e.target.classList.contains("export-window-overlay")&&(N.exportWindow=!1)}}]),t}(r.a.Component))),Y=new function e(){Object(i.a)(this,e),Object(y.e)(this,{pen:"KeyP",mirrorPen:"KeyA",paintBucket:"KeyS",sameColorPixel:"KeyD",eraser:"KeyF",stroke:"KeyG",circle:"KeyH",rectangle:"KeyJ",move:"KeyK",lightenDarken:"KeyR",dither:"KeyT",colorPicker:"KeyY",smoothPen:"KeyN"})},H=(a(99),Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"key-bind-overlay"+(N.keyBindWindow?" active":""),onClick:this.handleClosingClick},r.a.createElement("div",{className:"key-bind-window"},r.a.createElement("div",{className:"key-bind-container",onClick:this.handleBindClick},["pen","mirrorPen","paintBucket","sameColorPixel","eraser","stroke","circle","rectangle","move","lightenDarken","dither","colorPicker","smoothPen"].map(function(e,t){return r.a.createElement("div",{"data-key":Y[e],"data-tool":e,key:t},r.a.createElement("div",{className:e+"-image"}),r.a.createElement("p",{className:N.activeBindKey.tool===e?"active":""},Y[e]))})),r.a.createElement("button",{className:"close-window",onClick:function(){N.keyBindWindow=!1}},"X")))}},{key:"handleBindClick",value:function(e){var t=e.target.closest("[data-key]"),a=t.dataset.tool,n=t.dataset.key;N.activeBindKey={target:t,tool:a,oldKey:n},window.onkeypress=function(e){switch(e.stopPropagation(),e.code){case"Tab":case"CapsLock":case"Escape":case"ShiftLeft":case"ControlLeft":case"ShiftRight":case"ControlRight":case"Enter":case"Backspace":case"ScrollLock":case"Pause":case"Insert":case"Home":case"PageUp":case"PageDown":case"Delete":case"End":case"NumLock":case"NumpadEnter":case"MetaLeft":case"MetaRight":case"ContextMenu":case"AltLeft":case"AltRight":Y[N.activeBindKey.tool]=n;break;default:var t=e.code;for(var a in Y)Y[a]===t&&(Y[a]="..");Y[N.activeBindKey.tool]=t}N.activeBindKey={target:null,tool:null,oldKey:null},window.onkeypress=null}}},{key:"handleClosingClick",value:function(e){e.target.classList.contains("key-bind-overlay")&&(N.keyBindWindow=!1,window.onkeypress=null)}}]),t}(r.a.Component))),_=(a(100),Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return console.log("RENDER STARTED",JSON.stringify(z.data).slice(0,0),N.currentLayer),r.a.createElement("section",{className:"frame-pad"},z.order.map(function(t,a){return r.a.createElement("div",{className:"frame"+(a===N.currentFrame?" selected":""),key:Math.random(),id:t,draggable:!0,onClick:e.handleFrameDiv},r.a.createElement("button",{className:"delete-frame"}),r.a.createElement("button",{className:"duplicate-frame"}),r.a.createElement("div",{className:"number-frame","data-idx":a},a+1),r.a.createElement("canvas",{width:N.size,height:N.size,ref:function(a){e.handleCanvasRender(a,z.data[t])}}))}),r.a.createElement("button",{className:"add-frame",onClick:this.handleAddFrame},"+"))}},{key:"componentDidMount",value:function(){z.addFrame(null);var e,t=document.querySelector(".frame-pad");t.ondragstart=function(t){e=t.target.getAttribute("id")},t.ondragenter=function(e){e.target.parentElement.classList.contains("frame")&&e.target.parentElement.classList.add("drag-hovered")},t.ondragleave=function(e){e.target.parentElement.classList.contains("frame")&&e.target.parentElement.classList.remove("drag-hovered")},t.ondragover=function(e){return e.preventDefault()},t.ondrop=function(t){var a=t.target.closest("[draggable]"),n=a.getAttribute("id");t.preventDefault(),a.classList.remove("drag-hovered"),z.switchFrames(e,n)}}},{key:"handleCanvasRender",value:function(e,t){if(e){var a=e.getContext("2d");a.clearRect(0,0,e.width,e.height);var n=t[N.currentLayer];n&&a.putImageData(n,0,0)}}},{key:"handleFrameDiv",value:function(e){var t=e.currentTarget;switch(e.target.className){case"delete-frame":z.deleteFrame(t.id);break;case"duplicate-frame":var a=z.getData(t.id),n=z.order.indexOf(t.id);z.addFrame(a,n+1);break;default:var r=+t.querySelector(".number-frame").getAttribute("data-idx");N.currentFrame=r}}},{key:"handleAddFrame",value:function(){z.addFrame()}}]),t}(r.a.Component))),$=a(27),Q=function(e){console.log(e)},V={name:null,surname:null,imageUrl:null},Z=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return N.logIn?r.a.createElement("div",{className:"logged-on"},r.a.createElement($.GoogleLogout,{render:function(e){return r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"logout-button"},"Log out")},buttonText:"Logout",onLogoutSuccess:function(){N.logIn=!1,V.name=null,V.surname=null,V.imageUrl=null}}),r.a.createElement("div",{className:"user-info"},r.a.createElement("img",{className:"user-picture",src:V.imageUrl,alt:"user avatar",width:30,height:30}),r.a.createElement("p",{className:"user-name"},V.name))):r.a.createElement($.GoogleLogin,{clientId:"793758825150-1ihng8falh4dik8c9q6aig2db68dh7v8.apps.googleusercontent.com",render:function(e){return r.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"login-button"},"Sign up with Google")},buttonText:"Login",onSuccess:function(e){Q(e),V.name=e.profileObj.givenName,V.surname=e.profileObj.familyName,V.imageUrl=e.profileObj.imageUrl,N.logIn=!0},onFailure:Q,cookiePolicy:"single_host_origin"})}}]),t}(r.a.Component)),ee=(a(101),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"PiSKEL"),r.a.createElement("h2",null,this.props.name),r.a.createElement("div",{className:"header-buttons"},r.a.createElement("button",{className:"create-sprite"},"Create Sprite"),r.a.createElement(Z,null)))}}]),t}(r.a.Component)),te=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"landing-box"},r.a.createElement("div",{className:"landing-screenshot"}),r.a.createElement("div",{className:"landing-info"},r.a.createElement("h1",{className:"landing-h1"},"PiSKEL clone"),r.a.createElement("p",{className:"landing-p"},"Perfect application for creating and editing pixelated sprites"),r.a.createElement("button",{className:"landing-button",onClick:function(){N.landing=!1}},"Create your Sprite"))))}}]),t}(r.a.Component));function ae(){var e=Object(y.l)(Y);localStorage.setItem("keyBind",JSON.stringify(e))}var ne=Object(h.a)(function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return N.landing?r.a.createElement(r.a.Fragment,null,r.a.createElement(te,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{name:"New Piskel *"}),r.a.createElement("main",null,r.a.createElement(M,null),r.a.createElement(_,null),r.a.createElement(P,null),r.a.createElement(X,null),r.a.createElement(G,null)),r.a.createElement(J,null),r.a.createElement(H,null))}},{key:"componentDidMount",value:function(){if(window.addEventListener("keypress",this.keySwitcher),localStorage.getItem("keyBind")){var e=JSON.parse(localStorage.getItem("keyBind"));for(var t in e)Y[t]=e[t]}window.onunload=ae}},{key:"componentWillUnmount",value:function(){ae()}},{key:"keySwitcher",value:function(e){switch(console.log(Y.pen),e.code){case Y.pen:I.selectedTool="pen";break;case Y.mirrorPen:I.selectedTool="mirror-pen";break;case Y.eraser:I.selectedTool="eraser";break;case Y.paintBucket:I.selectedTool="paint-bucket";break;case Y.colorPicker:I.selectedTool="color-picker";break;case Y.sameColorPixel:I.selectedTool="same-color-pixel";break;case Y.stroke:I.selectedTool="stroke";break;case Y.circle:I.selectedTool="circle";break;case Y.rectangle:I.selectedTool="rectangle";break;case Y.move:I.selectedTool="move";break;case Y.dither:I.selectedTool="dither";break;case Y.lightenDarken:I.selectedTool="lighten-darken";break;case Y.smoothPen:I.selectedTool="smooth-pen"}}}]),t}(r.a.Component));a(102),a(103),a(104);c.a.render(r.a.createElement(ne,null),document.getElementById("root"))},44:function(e,t,a){e.exports=a(105)},69:function(e,t){},71:function(e,t){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[44,1,2]]]);
//# sourceMappingURL=main.c3cba385.chunk.js.map